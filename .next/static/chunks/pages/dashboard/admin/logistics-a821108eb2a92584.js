(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[475],{7181:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/admin/logistics",function(){return i(7355)}])},1164:function(e,n,i){"use strict";var t=i(5893),s=i(7294),r=i(7346),o=i(5005),l=i(2920);i(993);n.Z=function(e){var n=e.setConfirmation,i=e.action,c=e.title,d=e.packageId,a=(0,s.useState)(""),u=a[0],h=a[1],x=(0,s.useState)(!1),v=x[0],j=x[1];return(0,t.jsxs)(r.Z.Group,{className:"container p-5",children:[(0,t.jsx)(r.Z.Label,{children:(0,t.jsxs)("span",{style:{fontSize:"15px"},children:["Enter ",(0,t.jsx)("b",{style:{color:"green"},children:"confirm"})," ",c]})}),(0,t.jsx)("div",{className:"d-flex",children:(0,t.jsx)("input",{type:"text",value:u,onChange:function(e){h(e.target.value),j(!1)}})}),(0,t.jsx)("br",{}),(0,t.jsx)(o.Z,{onClick:function(){"confirm"===u?(j(!0),n(!1),i(d)):l.Am.error("wrong input")},children:"Confirm"}),v&&(0,t.jsx)("div",{className:"text-success",children:"Confirmed!"})]})}},6857:function(e,n,i){"use strict";var t=i(5893),s=i(7294),r=i(1664),o=i.n(r),l=i(1163),c=i(7893),d=i(6245),a=i(5387),u=i(5985),h=i(9008),x=i.n(h),v=i(2920);i(993);n.Z=function(e){var n=e.children,i=(0,s.useState)((function(){return localStorage.getItem("token")}))[0],r=(0,s.useState)(),h=r[0],j=r[1],p=(0,s.useRef)(),m=(0,l.useRouter)();return(0,s.useEffect)((function(){try{var e=(0,d.Z)(i);j(e)}catch(n){console.log(n)}}),[i]),(0,t.jsxs)(s.Fragment,{children:[(0,t.jsxs)(x(),{children:[(0,t.jsx)("title",{children:"Admin - Kupon "}),(0,t.jsx)("meta",{httpEquiv:"Content-Type",content:"text/html; charset=utf-8"}),(0,t.jsx)("meta",{httpEquiv:"x-ua-compatible",content:"ie=edge"}),(0,t.jsx)("meta",{name:"description",content:"description"}),(0,t.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,t.jsx)("link",{rel:"shortcut icon",href:"/images/kupon icon.png"})]}),(0,t.jsx)(v.Ix,{position:"bottom-center"}),(0,t.jsx)(u.Z,{children:(0,t.jsxs)("main",{id:"account",children:[(0,t.jsxs)("aside",{ref:p,children:[(0,t.jsxs)("div",{className:"profile",children:[(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{style:{color:"white",backgroundColor:"black",borderRadius:"50%",padding:"3px"},children:(0,c.Q)(null===h||void 0===h?void 0:h.firstName,null===h||void 0===h?void 0:h.lastName)}),(0,t.jsxs)("p",{children:["Admin -"," ",(0,c.S)((null===h||void 0===h?void 0:h.firstName)+" "+(null===h||void 0===h?void 0:h.lastName),10)]})]}),(0,t.jsx)("img",{id:"cancel",src:"https://img.icons8.com/ios/50/FD7E14/cancel.png",onClick:function(){return p.current.classList.remove("menu")}})]}),(0,t.jsxs)("div",{className:"side_links",children:[(0,t.jsx)(o(),{href:"/",children:(0,t.jsxs)("span",{style:{cursor:"pointer"},children:[(0,t.jsx)("img",{src:"https://img.icons8.com/ios-glyphs/30/FD7E14/home-page--v1.png",className:"icon"}),(0,t.jsx)("b",{children:"Home"})]})}),(0,t.jsx)(o(),{href:"logistics",children:(0,t.jsxs)("span",{style:{cursor:"pointer"},children:[(0,t.jsx)("img",{src:"https://img.icons8.com/material-outlined/24/FD7E14/dashboard-layout.png",className:"icon"}),(0,t.jsx)("b",{children:"Logistics"})]})}),(0,t.jsx)(o(),{href:"market",children:(0,t.jsxs)("span",{style:{cursor:"pointer"},children:[(0,t.jsx)("img",{src:"https://img.icons8.com/material-outlined/24/FD7E14/dashboard-layout.png",className:"icon"}),(0,t.jsx)("b",{children:"Market"})]})}),(0,t.jsxs)("span",{style:{cursor:"pointer"},onClick:function(){(0,a.Z)()&&m.push("/login")},children:[(0,t.jsx)("img",{src:"https://img.icons8.com/ios/50/FD7E14/logout-rounded--v1.png",className:"icon"}),(0,t.jsx)("b",{children:"Logout"})]})]})]}),(0,t.jsxs)("section",{className:"main_container",children:[(0,t.jsx)("header",{children:(0,t.jsxs)("div",{children:[(0,t.jsx)("img",{id:"menu",src:"https://img.icons8.com/ios-filled/50/000000/menu--v1.png",onClick:function(){return p.current.classList.add("menu")}}),(0,t.jsx)("h3",{children:"Admin - Settings"}),(0,t.jsx)("p",{style:{opacity:"0.7"},children:"Manage your personal and organization settings"})]})}),(0,t.jsx)("article",{children:n})]})]})})]})}},5985:function(e,n,i){"use strict";var t=i(5893),s=i(9704),r=i.n(s),o=i(1163),l=i(7294);n.Z=function(e){var n=e.children,i=(0,o.useRouter)();return(0,l.useEffect)((function(){var e=setTimeout((function(){var e=localStorage.getItem("token");try{r().verify(e,"kupon")}catch(n){i.push("/login")}}),0);return function(){return clearTimeout(e)}}),[]),(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{children:n})})}},7355:function(e,n,i){"use strict";i.r(n);var t=i(7568),s=i(4051),r=i.n(s),o=i(5893),l=i(7294),c=i(7893),d=i(6857),a=i(5738),u=i(5005),h=i(1164),x=i(2920),v=(i(993),i(1163));n.default=function(){var e=(0,l.useState)((function(){return localStorage.getItem("token")}))[0],n=(0,v.useRouter)(),i=(0,l.useState)([]),s=i[0],j=i[1],p=(0,l.useState)(!1),m=p[0],f=p[1],g=(0,l.useState)(),y=g[0],k=g[1],b=(0,l.useState)(!1),S=b[0],N=b[1],C=(0,l.useState)(!1),w=C[0],E=C[1];(0,l.useEffect)((function(){var n=function(){var n=(0,t.Z)(r().mark((function n(){var i,t,o;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log(s),n.next=4,fetch("/admin/logistics",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});case 4:if((i=n.sent).ok){n.next=10;break}return n.next=8,i.json();case 8:throw t=n.sent,new Error(t.msg);case 10:return n.next=12,i.json();case 12:o=n.sent,j(o.msg),console.log(o.msg),n.next=20;break;case 17:n.prev=17,n.t0=n.catch(0),console.log(n.t0);case 20:case"end":return n.stop()}}),n,null,[[0,17]])})));return function(){return n.apply(this,arguments)}}();n()}),[]);var Z=function(){return f(!1)},A=function(){var i=(0,t.Z)(r().mark((function i(){var t,s,o;return r().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return E(!0),i.prev=1,i.next=4,fetch("/admin/logistics/update_status",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({id:null===y||void 0===y?void 0:y.id,status:"pending"==(null===y||void 0===y?void 0:y.status)?"in transit":"delivered"})});case 4:if((t=i.sent).ok){i.next=11;break}return E(!1),i.next=9,t.json();case 9:throw s=i.sent,new Error(null===s||void 0===s?void 0:s.msg);case 11:return i.next=13,t.json();case 13:o=i.sent,x.Am.success(null===o||void 0===o?void 0:o.msg),E(!1),n.reload(),i.next=22;break;case 19:i.prev=19,i.t0=i.catch(1),console.log(i.t0);case 22:case"end":return i.stop()}}),i,null,[[1,19]])})));return function(){return i.apply(this,arguments)}}();return(0,o.jsxs)(d.Z,{children:[(0,o.jsxs)("div",{className:"table-responsive",children:[(0,o.jsxs)("h1",{children:["LOGISTICS ORDER : ",(0,o.jsx)("b",{children:s.length})]}),(0,o.jsxs)("table",{className:"table table-striped",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{scope:"col",children:"Shipment ID"}),(0,o.jsx)("th",{scope:"col",children:"Address(Sender)"}),(0,o.jsx)("th",{scope:"col",children:"Address(receiver)"}),(0,o.jsx)("th",{scope:"col",children:"Status"})]})}),(0,o.jsx)("tbody",{children:null===s||void 0===s?void 0:s.map((function(e){return(0,o.jsxs)("tr",{onClick:function(){return function(e){f(!0),k(e)}(e)},style:{cursor:"pointer"},children:[(0,o.jsx)("td",{children:null===e||void 0===e?void 0:e.id}),(0,o.jsx)("td",{children:(0,c.S)(null===e||void 0===e?void 0:e.pickupAddress,20)}),(0,o.jsx)("td",{children:(0,c.S)(null===e||void 0===e?void 0:e.deliveryAddress,20)}),(0,o.jsx)("td",{style:{color:"pending"==(null===e||void 0===e?void 0:e.status)?"red":"in transit"==(null===e||void 0===e?void 0:e.status)?"#f1c40f":"green"},children:null===e||void 0===e?void 0:e.status})]},null===e||void 0===e?void 0:e.id)}))})]})]}),(0,o.jsxs)("div",{style:{overflow:"auto"},children:[(0,o.jsxs)(a.Z,{show:m,onHide:Z,children:[(0,o.jsxs)(a.Z.Header,{closeButton:!0,children:[(0,o.jsx)(a.Z.Title,{children:"Logistics Details"}),(0,o.jsx)("br",{}),w?(0,o.jsx)("button",{style:{backgroundColor:"pending"==(null===y||void 0===y?void 0:y.status)?"red":"in transit"==(null===y||void 0===y?void 0:y.status)?"#f1c40f":"green",color:"white",padding:"2px 10px",borderRadius:"5px",cursor:"pointer"},onClick:function(){return N(!0)},disabled:"delivered"==(null===y||void 0===y?void 0:y.status),children:"..."}):(0,o.jsx)("button",{style:{backgroundColor:"pending"==(null===y||void 0===y?void 0:y.status)?"red":"in transit"==(null===y||void 0===y?void 0:y.status)?"#f1c40f":"green",color:"white",padding:"2px 3px",borderRadius:"5px",cursor:"pointer"},onClick:function(){return N(!0)},disabled:"delivered"==(null===y||void 0===y?void 0:y.status),children:null===y||void 0===y?void 0:y.status})]}),(0,o.jsx)(a.Z.Body,{children:(0,o.jsxs)("table",{className:"table",children:[(0,o.jsx)("thead",{children:"Sender Details"}),(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Shipment ID"}),(0,o.jsx)("td",{children:null===y||void 0===y?void 0:y.id})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Name"}),(0,o.jsxs)("td",{children:[null===y||void 0===y?void 0:y.firstName," ",null===y||void 0===y?void 0:y.lastName]})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Email"}),(0,o.jsx)("td",{children:null===y||void 0===y?void 0:y.email})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Telephone"}),(0,o.jsx)("td",{children:null===y||void 0===y?void 0:y.telephone})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Pick up address"}),(0,o.jsx)("td",{children:null===y||void 0===y?void 0:y.pickupAddress})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Pick up city"}),(0,o.jsx)("td",{children:null===y||void 0===y?void 0:y.pickupCity})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Pick up state"}),(0,o.jsx)("td",{children:null===y||void 0===y?void 0:y.pickupState})]})]}),(0,o.jsx)("hr",{}),(0,o.jsx)("thead",{children:"Receiver Details"}),(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Name"}),(0,o.jsxs)("td",{children:[null===y||void 0===y?void 0:y.firstName," ",null===y||void 0===y?void 0:y.lastName]})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Email"}),(0,o.jsx)("td",{children:null===y||void 0===y?void 0:y.email})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Delivery address"}),(0,o.jsx)("td",{children:null===y||void 0===y?void 0:y.deliveryAddress})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Delivery city"}),(0,o.jsx)("td",{children:null===y||void 0===y?void 0:y.deliveryCity})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Delivery state"}),(0,o.jsx)("td",{children:null===y||void 0===y?void 0:y.deliveryState})]})]}),(0,o.jsxs)("tfoot",{children:[(0,o.jsx)("th",{children:"Package Code"}),(0,o.jsx)("td",{children:null===y||void 0===y?void 0:y.receiverCode})]})]})}),(0,o.jsx)(a.Z.Footer,{children:(0,o.jsx)(u.Z,{variant:"secondary",onClick:Z,children:"Close"})})]}),S?(0,o.jsx)(a.Z,{show:!0,children:(0,o.jsx)(h.Z,{setConfirmation:N,action:A,title:"to update logistics status"})}):null]})]})}},5387:function(e,n,i){"use strict";function t(){return localStorage.clear(),!0}i.d(n,{Z:function(){return t}})},7893:function(e,n,i){"use strict";function t(e,n){return e.length>n?e.slice(0,n-3)+"...":e}function s(e,n){var i=null===e||void 0===e?void 0:e.charAt(0),t=null===n||void 0===n?void 0:n.charAt(0);return i||t?i+t:"nil"}i.d(n,{Q:function(){return s},S:function(){return t}})}},function(e){e.O(0,[714,424,231,100,359,87,835,774,888,179],(function(){return n=7181,e(e.s=n);var n}));var n=e.O();_N_E=n}]);