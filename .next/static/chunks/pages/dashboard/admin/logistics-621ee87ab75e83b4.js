(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[475],{7181:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/admin/logistics",function(){return i(7355)}])},1164:function(e,n,i){"use strict";var s=i(5893),t=i(7294),r=i(7346),o=i(5005),l=i(2920);i(993);n.Z=function(e){var n=e.setConfirmation,i=e.action,c=e.title,d=e.packageId,a=(0,t.useState)(""),u=a[0],h=a[1],x=(0,t.useState)(!1),v=x[0],j=x[1];return(0,s.jsxs)(r.Z.Group,{className:"container p-5",children:[(0,s.jsx)(r.Z.Label,{children:(0,s.jsxs)("span",{style:{fontSize:"15px"},children:["Enter ",(0,s.jsx)("b",{style:{color:"green"},children:"confirm"})," ",c]})}),(0,s.jsx)("div",{className:"d-flex",children:(0,s.jsx)("input",{type:"text",value:u,onChange:function(e){h(e.target.value),j(!1)}})}),(0,s.jsx)("br",{}),(0,s.jsx)(o.Z,{onClick:function(){"confirm"===u?(j(!0),n(!1),i(d)):l.Am.error("wrong input")},children:"Confirm"}),v&&(0,s.jsx)("div",{className:"text-success",children:"Confirmed!"})]})}},6857:function(e,n,i){"use strict";var s=i(5893),t=i(7294),r=i(1664),o=i.n(r),l=i(1163),c=i(7893),d=i(6245),a=i(5387),u=i(5985),h=i(9008),x=i.n(h),v=i(2920);i(993);n.Z=function(e){var n=e.children,i=(0,t.useState)((function(){return localStorage.getItem("token")}))[0],r=(0,t.useState)(),h=r[0],j=r[1],p=(0,t.useRef)(),m=(0,l.useRouter)();return(0,t.useEffect)((function(){try{var e=(0,d.Z)(i);j(e)}catch(n){console.log(n)}}),[i]),(0,s.jsxs)(t.Fragment,{children:[(0,s.jsxs)(x(),{children:[(0,s.jsx)("title",{children:"Admin - Kupon "}),(0,s.jsx)("meta",{httpEquiv:"Content-Type",content:"text/html; charset=utf-8"}),(0,s.jsx)("meta",{httpEquiv:"x-ua-compatible",content:"ie=edge"}),(0,s.jsx)("meta",{name:"description",content:"description"}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,s.jsx)("link",{rel:"shortcut icon",href:"/images/kupon icon.png"})]}),(0,s.jsx)(v.Ix,{position:"bottom-center"}),(0,s.jsx)(u.Z,{children:(0,s.jsxs)("main",{id:"account",children:[(0,s.jsxs)("aside",{ref:p,children:[(0,s.jsxs)("div",{className:"profile",children:[(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{style:{color:"white",backgroundColor:"black",borderRadius:"50%",padding:"3px"},children:(0,c.Q)(null===h||void 0===h?void 0:h.firstName,null===h||void 0===h?void 0:h.lastName)}),(0,s.jsxs)("p",{children:["Admin -"," ",(0,c.S)((null===h||void 0===h?void 0:h.firstName)+" "+(null===h||void 0===h?void 0:h.lastName),10)]})]}),(0,s.jsx)("img",{id:"cancel",src:"https://img.icons8.com/ios/50/FD7E14/cancel.png",onClick:function(){return p.current.classList.remove("menu")}})]}),(0,s.jsxs)("div",{className:"side_links",children:[(0,s.jsx)(o(),{href:"/",children:(0,s.jsxs)("span",{style:{cursor:"pointer"},children:[(0,s.jsx)("img",{src:"https://img.icons8.com/ios-glyphs/30/FD7E14/home-page--v1.png",className:"icon"}),(0,s.jsx)("b",{children:"Home"})]})}),(0,s.jsx)(o(),{href:"profile",children:(0,s.jsxs)("span",{style:{cursor:"pointer"},children:[(0,s.jsx)("img",{src:"https://img.icons8.com/material-outlined/24/FD7E14/user.png",className:"icon"}),(0,s.jsx)("b",{children:"My Profile"})]})}),(0,s.jsx)(o(),{href:"user",children:(0,s.jsxs)("span",{style:{cursor:"pointer"},children:[(0,s.jsx)("img",{src:"https://img.icons8.com/stickers/100/null/user-skin-type-3.png",className:"icon"}),(0,s.jsx)("b",{children:"User"})]})}),(0,s.jsx)(o(),{href:"logistics",children:(0,s.jsxs)("span",{style:{cursor:"pointer"},children:[(0,s.jsx)("img",{src:"https://img.icons8.com/ios-glyphs/30/FD7E14/food-truck.png",className:"icon"}),(0,s.jsx)("b",{children:"Logistics"})]})}),(0,s.jsx)(o(),{href:"market",children:(0,s.jsxs)("span",{style:{cursor:"pointer"},children:[(0,s.jsx)("img",{src:"https://img.icons8.com/material-outlined/24/FD7E14/shopping-cart--v1.png",className:"icon"}),(0,s.jsx)("b",{children:"Market"})]})}),(0,s.jsxs)("span",{style:{cursor:"pointer"},onClick:function(){(0,a.Z)()&&m.push("/login")},children:[(0,s.jsx)("img",{src:"https://img.icons8.com/ios/50/FD7E14/logout-rounded--v1.png",className:"icon"}),(0,s.jsx)("b",{children:"Logout"})]})]})]}),(0,s.jsxs)("section",{className:"main_container",children:[(0,s.jsx)("header",{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("img",{id:"menu",src:"https://img.icons8.com/ios-filled/50/000000/menu--v1.png",onClick:function(){return p.current.classList.add("menu")}}),(0,s.jsx)("h3",{children:"Admin - Settings"}),(0,s.jsx)("p",{style:{opacity:"0.7"},children:"Manage your personal and organization settings"})]})}),(0,s.jsx)("article",{children:n})]})]})})]})}},5985:function(e,n,i){"use strict";var s=i(5893),t=i(9704),r=i.n(t),o=i(1163),l=i(7294);n.Z=function(e){var n=e.children,i=(0,o.useRouter)();return(0,l.useEffect)((function(){var e=setTimeout((function(){var e=localStorage.getItem("token");try{r().verify(e,"kupon")}catch(n){i.push("/login")}}),0);return function(){return clearTimeout(e)}}),[]),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{children:n})})}},7355:function(e,n,i){"use strict";i.r(n);var s=i(7568),t=i(4051),r=i.n(t),o=i(5893),l=i(7294),c=i(7893),d=i(6857),a=i(6212),u=i(5005),h=i(1164),x=i(2920),v=(i(993),i(1163)),j=i(130);n.default=function(){var e=(0,l.useState)((function(){return localStorage.getItem("token")}))[0],n=(0,v.useRouter)(),i=(0,l.useState)([]),t=i[0],p=i[1],m=(0,l.useState)(!1),f=m[0],g=m[1],y=(0,l.useState)(),k=y[0],b=y[1],N=(0,l.useState)(!1),S=N[0],C=N[1],w=(0,l.useState)(!0),Z=w[0],E=w[1],A=(0,l.useState)(!1),D=A[0],_=A[1];(0,l.useEffect)((function(){var n=function(){var n=(0,s.Z)(r().mark((function n(){var i,s,o;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log(t),n.next=4,fetch("/admin/logistics",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});case 4:if((i=n.sent).ok){n.next=10;break}return n.next=8,i.json();case 8:throw s=n.sent,new Error(s.msg);case 10:return n.next=12,i.json();case 12:o=n.sent,p(o.msg),console.log(o.msg),n.next=20;break;case 17:n.prev=17,n.t0=n.catch(0),console.log(n.t0);case 20:case"end":return n.stop()}}),n,null,[[0,17]])})));return function(){return n.apply(this,arguments)}}();n()}),[]);var T=function(){return g(!1)},F=function(){var i=(0,s.Z)(r().mark((function i(){var s,t,o;return r().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return _(!0),i.prev=1,i.next=4,fetch("/admin/logistics/update_status",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({id:null===k||void 0===k?void 0:k.id,status:"pending"==(null===k||void 0===k?void 0:k.status)?"in transit":"delivered"})});case 4:if((s=i.sent).ok){i.next=11;break}return _(!1),i.next=9,s.json();case 9:throw t=i.sent,new Error(null===t||void 0===t?void 0:t.msg);case 11:return i.next=13,s.json();case 13:o=i.sent,x.Am.success(null===o||void 0===o?void 0:o.msg),_(!1),n.reload(),i.next=22;break;case 19:i.prev=19,i.t0=i.catch(1),console.log(i.t0);case 22:case"end":return i.stop()}}),i,null,[[1,19]])})));return function(){return i.apply(this,arguments)}}();return(0,o.jsxs)(d.Z,{children:[(0,o.jsxs)("div",{className:"table-responsive",children:[(0,o.jsxs)("h1",{children:["LOGISTICS ORDER : ",(0,o.jsx)("b",{children:t.length})]}),(0,o.jsxs)("table",{className:"table table-striped",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{scope:"col",children:"Shipment ID"}),(0,o.jsx)("th",{scope:"col",children:"Address(Sender)"}),(0,o.jsx)("th",{scope:"col",children:"Address(receiver)"}),(0,o.jsx)("th",{scope:"col",children:"Status"})]})}),(0,o.jsx)("tbody",{children:null===t||void 0===t?void 0:t.map((function(e){return(0,o.jsxs)("tr",{onClick:function(){return function(e){g(!0),b(e)}(e)},style:{cursor:"pointer"},children:[(0,o.jsx)("td",{children:null===e||void 0===e?void 0:e.id}),(0,o.jsx)("td",{children:(0,c.S)(null===e||void 0===e?void 0:e.pickupAddress,20)}),(0,o.jsx)("td",{children:(0,c.S)(null===e||void 0===e?void 0:e.deliveryAddress,20)}),(0,o.jsx)("td",{style:{color:"pending"==(null===e||void 0===e?void 0:e.status)?"red":"in transit"==(null===e||void 0===e?void 0:e.status)?"#f1c40f":"green"},children:null===e||void 0===e?void 0:e.status})]},null===e||void 0===e?void 0:e.id)}))})]})]}),(0,o.jsxs)("div",{style:{overflow:"auto"},children:[(0,o.jsxs)(a.Z,{show:f,onHide:T,children:[(0,o.jsxs)(a.Z.Header,{closeButton:!0,children:[(0,o.jsx)(a.Z.Title,{children:"Logistics Details"}),(0,o.jsx)("br",{}),D?(0,o.jsx)("button",{style:{backgroundColor:"pending"==(null===k||void 0===k?void 0:k.status)?"red":"in transit"==(null===k||void 0===k?void 0:k.status)?"#f1c40f":"green",color:"white",padding:"2px 10px",borderRadius:"5px",cursor:"pointer"},onClick:function(){return C(!0)},disabled:"delivered"==(null===k||void 0===k?void 0:k.status),children:"..."}):(0,o.jsx)("button",{style:{backgroundColor:"pending"==(null===k||void 0===k?void 0:k.status)?"red":"in transit"==(null===k||void 0===k?void 0:k.status)?"#f1c40f":"green",color:"white",padding:"2px 3px",borderRadius:"5px",cursor:"pointer"},onClick:function(){return C(!0)},disabled:"delivered"==(null===k||void 0===k?void 0:k.status),children:null===k||void 0===k?void 0:k.status})]}),(0,o.jsxs)(a.Z.Body,{children:[(0,o.jsx)(j.Z,{className:"w-screen",children:"string"==typeof(null===k||void 0===k?void 0:k.files)?JSON.parse(null===k||void 0===k?void 0:k.files).map((function(e,n){return(0,o.jsx)(j.Z.Item,{children:(0,o.jsx)("img",{className:"d-block w-100",src:"data:image/png;base64,".concat(e),alt:"Product ".concat(k.title),style:{height:"auto"}})},n)})):null})," ",(0,o.jsx)("br",{}),(0,o.jsxs)("table",{className:"table",children:[(0,o.jsx)("thead",{children:"Sender Details"}),(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Shipment ID"}),(0,o.jsx)("td",{children:null===k||void 0===k?void 0:k.id})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Name"}),(0,o.jsxs)("td",{children:[null===k||void 0===k?void 0:k.firstName," ",null===k||void 0===k?void 0:k.lastName]})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Email"}),(0,o.jsx)("td",{children:null===k||void 0===k?void 0:k.email})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Telephone"}),(0,o.jsx)("td",{children:null===k||void 0===k?void 0:k.telephone})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Pick up address"}),(0,o.jsx)("td",{children:null===k||void 0===k?void 0:k.pickupAddress})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Pick up city"}),(0,o.jsx)("td",{children:null===k||void 0===k?void 0:k.pickupCity})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Pick up state"}),(0,o.jsx)("td",{children:null===k||void 0===k?void 0:k.pickupState})]})]}),(0,o.jsx)("hr",{}),(0,o.jsx)("thead",{children:"Receiver Details"}),(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Name"}),(0,o.jsxs)("td",{children:[null===k||void 0===k?void 0:k.firstName," ",null===k||void 0===k?void 0:k.lastName]})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Email"}),(0,o.jsx)("td",{children:null===k||void 0===k?void 0:k.email})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Delivery address"}),(0,o.jsx)("td",{children:null===k||void 0===k?void 0:k.deliveryAddress})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Delivery city"}),(0,o.jsx)("td",{children:null===k||void 0===k?void 0:k.deliveryCity})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Delivery state"}),(0,o.jsx)("td",{children:null===k||void 0===k?void 0:k.deliveryState})]})]}),(0,o.jsxs)("tfoot",{children:[(0,o.jsx)("th",{children:"Package Code"}),(0,o.jsx)("td",{children:null===k||void 0===k?void 0:k.receiverCode})]})]})]}),(0,o.jsx)(a.Z.Footer,{children:(0,o.jsx)(u.Z,{variant:"secondary",onClick:T,children:"Close"})})]}),S?(0,o.jsxs)(a.Z,{show:Z,children:[(0,o.jsx)(h.Z,{setConfirmation:C,action:F,title:"to update logistics status '".concat("pending"==(null===k||void 0===k?void 0:k.status)?"in transit":"delivered","'")}),(0,o.jsx)(a.Z.Footer,{children:(0,o.jsx)(u.Z,{variant:"error",onClick:function(){return E(!1)},children:"Close"})})]}):null]})]})}},5387:function(e,n,i){"use strict";function s(){return localStorage.clear(),!0}i.d(n,{Z:function(){return s}})},7893:function(e,n,i){"use strict";function s(e,n){return(null===e||void 0===e?void 0:e.length)>n?e.slice(0,n-3)+"...":e}function t(e,n){var i=null===e||void 0===e?void 0:e.charAt(0),s=null===n||void 0===n?void 0:n.charAt(0);return i||s?i+s:"nil"}i.d(n,{Q:function(){return t},S:function(){return s}})}},function(e){e.O(0,[714,424,531,715,100,231,334,774,888,179],(function(){return n=7181,e(e.s=n);var n}));var n=e.O();_N_E=n}]);